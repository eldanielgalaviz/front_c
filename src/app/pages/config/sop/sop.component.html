<p-confirmPopup></p-confirmPopup>
<section class="m-5">
    <div class="grid">
        <div class="col-12 md:col-12">
            <div class="flex justify-content-end">
                <div class="m-1">
                    <p-button class="m-1" icon="pi pi-plus" label="Add new SOP" (onClick)="showVisible()"></p-button>
                </div>
            </div>
        </div>
        <div class="col-12 md:col-12">
            <p-table [value]="sops" [paginator]="true" [rows]="5" [showCurrentPageReport]="true"
            [tableStyle]="{ 'min-width': '50rem' }" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="ShortDescriptionSOP">ShortDescriptionSOP <p-sortIcon field="ShortDescriptionSOP"></p-sortIcon></th>
                        <th pSortableColumn="LargeDescriptionSOP">LargeDescriptionSOP <p-sortIcon field="LargeDescriptionSOP"></p-sortIcon></th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-product>
                    <tr>
                        <td>{{product.ShortDescriptionSOP}}</td>
                        <td>{{product.LargeDescriptionSOP}}</td>
                        <td>
                           <div class="flex justify-content-end">
                            <p-button class="m-1" icon="pi pi-pencil" styleClass="p-button-rounded" (onClick)="onRowSelected(product)"></p-button>
                            <p-button class="m-1" icon="pi pi-trash" (click)="confirm($event, product, 0)" styleClass="p-button-outlined p-button-rounded p-button-danger"></p-button>
                           </div>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</section>

<p-dialog header="SOP Form" [(visible)]="visible" [modal]="true" [maximizable]="true" (onHide)="hideVisible()">
    <ng-template pTemplate="content">
        <div class="grid" [formGroup]="sopForm">
            <div class="col-12 md:col-6">
                <span class="p-float-label">
                    <input type="text" formControlName="p_ShortDescriptionSOP" pInputText>
                    <label>Short Description SOP</label>
                </span>
                <div *ngIf="sopForm.get('p_ShortDescriptionSOP')?.invalid && formValidate">
                    <small class="p-error">This field is required</small>
                </div>
            </div>
            <div class="col-12 md:col-6">
                <span class="p-float-label">
                    <input type="text" formControlName="p_LargeDescriptionSOP" pInputText>
                    <label>Large Description SOP</label>
                </span>
                <div *ngIf="sopForm.get('p_LargeDescriptionSOP')?.invalid && formValidate">
                    <small class="p-error">This field is required</small>
                </div>
            </div>
        </div>
    </ng-template>
    <p-footer>
        <div class="flex justify-content-end">
            <p-button class="m-1" label="Cancel" (click)="hideVisible()" icon="pi pi-times"></p-button>
            <p-button class="m-1" label="Save" (onClick)="save()" icon="pi pi-save"></p-button>
        </div>
    </p-footer>
</p-dialog>