<p-dialog header="Activity Detail" [(visible)]="visible" [style]="{width: '50vw'}" (onHide)="onHide()">
    <div class="mt-5" *ngIf="activity">
        <div class="flex justify-content-between mb-5">
            <div class="text-2xl text-900">Activity - {{ activity.Actividad}}</div>
            <div class="text-lg text-900">{{activity.actividaddatestart | date: 'dd/MM/yyyy': 'UTC'}} - {{activity.actividaddateend | date: 'dd/MM/yyyy': 'UTC'}}</div>
        </div>
        <p-table styleClass="p-datatable-gridlines" [loading]="loading">
            <ng-template pTemplate="footer">
              <tr>
                <td class="bg-primary">Objetivo</td>
                <td>{{activity.objetivo}}</td>
              </tr>
              <tr>
                <td class="bg-primary">Metodología</td>
                <td>{{activity.SOPdescription}}</td>
              </tr>
              <tr>
                <td class="bg-primary">Periodo de ejecución</td>
                <td>{{activity.actividaddatestart | date: 'dd/MM/yyyy': 'UTC'}} - {{activity.actividaddateend | date: 'dd/MM/yyyy': 'UTC'}}</td>
              </tr>
              <tr>
                <td class="bg-primary">Presupuesto de actividad (USD)</td>
                <td>{{activity.EstimadoUSD | currency}}</td>
              </tr>
              <tr>
                <td class="bg-primary">Indicadores</td>
                <td>
                  <div class="flex justify-content-start mb-1">
                    <div class="text-lg text-900">Cualitativos</div>
                  </div>
                  <div>
                    {{activity.Cualitativos}}
                  </div>
                  <div class="flex justify-content-start mb-5">
                  </div>
                  <div class="text-lg text-900">Cuantitativos</div>
                  <ul *ngIf="indicadoresCuantitativos[activity.IdActividaddata]; else loading" [innerHTML]="indicadoresCuantitativos[activity.IdActividaddata]"></ul>
                  <ng-template #loading>
                    Cargando indicadores...
                  </ng-template>
                </td>
              </tr>
              <tr>
                <td colspan="3" class="bg-primary">
                  <div class="flex justify-content-center">
                    <strong>Reporteo</strong>
                  </div>
                </td>
              </tr>
              <tr>
                <td colspan="3">
                  <div class="flex justify-content-between mb-3">
                    <div><strong>¿Quién?</strong></div>
                    <div><strong>¿Cómo?</strong></div>
                    <div><strong>¿Cuándo?</strong></div>
                  </div>
                </td>
              </tr>
              <tr>
                <td colspan="3" *ngIf="reporteo[activity.IdActividaddata]; else loading" [innerHTML]="reporteo[activity.IdActividaddata]"></td>
              </tr>
              <tr>
                <td colspan="2">
                  <div class="mt-2">
                    <p-table styleClass="p-datatable-gridlines">
                      <ng-template pTemplate="footer">
                        <tr>
                          <td class="bg-primary" rowspan="5">Roles para realizar actividad</td>
                          <td>Seguimiento</td>
                          <td>{{activity.IDUserSeguimiento}}</td>
                        </tr>
                        <tr>
                          <td>Coordinador</td>
                          <td>{{activity.IDUserCoordinador}}</td>
                        </tr>
                        <tr>
                          <td>Ejecutor de campo</td>
                          <td>{{activity.UserEjecutordeCampo}}</td>
                        </tr>
                        <tr>
                          <td>Supervisor</td>
                          <td>{{activity.UserSupervisor}}</td>
                        </tr>
                        <tr>
                          <td>Evaluador</td>
                          <td>{{activity.IDUserEvaluador}}</td>
                        </tr>
                      </ng-template>
                    </p-table>
                  </div>
                  <div class="mt-2">
                    Mapa de ubicación geográfica
                    <div class="flex justify-content-center">
                      <img *ngIf="activity.linkdelarchivo" [src]="url + activity.linkdelarchivo" width="500" height="400">
                      <small *ngIf="!activity.linkdelarchivo">Sin imagen previa</small>
                    </div>
                  </div>
                </td>
              </tr>
            </ng-template>
        </p-table>
    </div>
</p-dialog>
